
类型与属性
---------------------

**以下是本项目的一些开发细节, 非开发者可以不用关注.**

虽然都表现为一个待办项目, 但系统实际上可以按照类型和属性进行划分. 整个系统有三个类型, 即

类型    | 含义
--------|--------------------------------
single  | 普通的待办项目
file    | 离线下载或者上传的文件
note    | 创建的便签

与此同时, 还有一个平行的属性系统, 系统中具有如下的一些属性

属性        | 含义
------------|--------------------------------
deadline    | 截止时间
sp/re/work  | 是否为 特殊/可重复/工作 任务
old         | 是否为老年代项目
url         | 项目对应的连接

任意一个项目只能具有一个类型, 但可以拥有任意数量的属性.




开发说明
---------------

### 调试时间模式

在项目中创建一个名为`database/time.debug`的文件, 并写入一个标准的时间格式字符串, 例如

```
2020-6-26 18:58:29
```

在程序启动时, 如果检测到此文件存在, 则所有关于时间的API都会返回此文件制定的时间. 
此操作支持动态加载, 因此在需要调试时间相关的问题时, 可以利用此机制实现时间的任意切换.

### 线程竞争问题

由于有GIL的存在, CPython实现下, 部分Python操作天然就是原子的. 
例如list的append操作, 天然具有原子性, 但是对于list的remove操作, 则不具有原子性. 

由于本项目采用list结构存储用户数据, 而用户数据存在同时插入和删除的可能性, 因此如果不加锁, 还是有可能导致数据结构出现错误.

考虑到本项目大部分时候的操作时查询, 因此仅需要在插入和删除的地方加入一个普通的锁, 使插入和删除在任意时刻均只能有一个操作执行即可保证数据的安全性.

- [列表与队列——谈谈线程安全](https://juejin.cn/post/6844903615824396295)

### 版本号

基于一般的版本号约定, 大版本号不同的程序可能存在不兼容的情况. 请注意程序的版本号, 不同版本号的程序可能对数据模型进行变更, 导致以往的数据无效.

